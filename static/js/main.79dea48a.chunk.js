(this["webpackJsonphm-8-phone"]=this["webpackJsonphm-8-phone"]||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},85:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(26),s=n.n(r),o=n(12),i=(n(50),n(16)),u=n(17),l=n(19),b=n(18),j=n(6),d=(n(51),"/"),h="/about",m="/contact",O="/login",p="/signup",f=n(13),g=n.n(f),v=n(22),x=n(14),C=n.n(x),N=n(3),y={registerRequest:Object(N.b)("auth/registerRequest"),registerSuccess:Object(N.b)("auth/registerSuccess"),registerError:Object(N.b)("auth/registerError"),loginRequest:Object(N.b)("auth/loginRequest"),loginSuccess:Object(N.b)("auth/loginSuccess"),loginError:Object(N.b)("auth/loginError"),logoutRequest:Object(N.b)("auth/logoutRequest"),logoutSuccess:Object(N.b)("auth/logoutSuccess"),logoutError:Object(N.b)("auth/logoutError"),getCurrentUserRequest:Object(N.b)("auth/getCurrentUserRequest"),getCurrentUserSuccess:Object(N.b)("auth/getCurrentUserSuccess"),getCurrentUserError:Object(N.b)("auth/getCurrentUserError")};C.a.defaults.baseURL="https://connections-api.herokuapp.com";var w,k,S,A,E,R,q=function(e){C.a.defaults.headers.common.Authorization="Bearer ".concat(e)},U=function(){C.a.defaults.headers.common.Authorization=""},_=n(5),L=n(0),F=function(){return Object(L.jsxs)("div",{className:"Nav-Container__right",children:[Object(L.jsx)(o.b,{to:O,className:"link",activeClassName:"active-link",children:"Log in"}),Object(L.jsx)(o.b,{to:p,className:"link",activeClassName:"active-link",children:"Sign up"})]})},T=function(e){return e.auth.isLogedIn},D=function(e){return e.auth.user.name},z=n.p+"static/media/default-avatar.4cff0967.webp",H={onLogout:function(){return function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(y.logoutRequest()),e.prev=1,e.next=4,C.a.post("/users/logout");case 4:U(),t(y.logoutSuccess()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(y.logoutError(e.t0.message));case 11:case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},I=Object(_.b)((function(e){return{name:D(e),avatar:z}}),H)((function(e){var t=e.avatar,n=e.name,c=e.onLogout;return Object(L.jsxs)("div",{className:"Nav-Container__right",children:[Object(L.jsx)("img",{src:t,alt:n,width:"32"}),Object(L.jsxs)("span",{className:"Span",children:["Hi, ",n]}),Object(L.jsx)("button",{type:"button",className:"logout-btn",onClick:c,children:"Logout"})]})})),M=Object(_.b)((function(e){return{isAuthenticated:T(e)}}))((function(e){var t=e.isAuthenticated;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("nav",{className:"Nav-Container",children:[Object(L.jsxs)("div",{className:"Nav-Container__left",children:[Object(L.jsx)(o.b,{exact:!0,to:d,className:"link",activeClassName:"active-link",children:"Home"}),Object(L.jsx)(o.b,{to:h,className:"link",activeClassName:"active-link",children:"About"}),Object(L.jsx)(o.b,{to:m,className:"link",activeClassName:"active-link",children:"Contacts"})]}),t?Object(L.jsx)(I,{}):Object(L.jsx)(F,{})]})})})),P=function(){return Object(L.jsx)("div",{className:"Container",children:Object(L.jsxs)("div",{className:"Container-title",children:[Object(L.jsx)("h1",{className:"Home-title",children:"Welcome!"}),Object(L.jsx)("p",{className:"Home-text",children:"Here you can create your own phonebook"})]})})},B=function(){return Object(L.jsx)("div",{className:"About-container",children:Object(L.jsxs)("div",{className:"About-wrap",children:[Object(L.jsx)("h1",{className:"About-title",children:"Phonebook app."}),Object(L.jsx)("p",{className:"About-text",children:"This page will tell you about our application. Here you can register and create your own phone book. You can add an unlimited number of contacts to be saved on the server. To do this, register. If you are already registered, then log into your account and you will get access to your phone book in the Contacts section."})]})})},J=n(2),Z=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:""},e.handleChange=function(t){var n=t.target,c=n.name,a=n.value;e.setState(Object(J.a)({},c,a))},e.handleSubmit=function(t){t.preventDefault(),e.props.onLogin(e.state),console.log("email :",e.state.email),console.log("password :",e.state.password),e.reset()},e.reset=function(){e.setState({email:"",password:""})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,children:[Object(L.jsx)("div",{className:"title",children:"Hi!"}),Object(L.jsx)("div",{className:"subtitle",children:"Please, log in!"}),Object(L.jsxs)("div",{className:"input-container ic2",children:[Object(L.jsx)("input",{id:"email1",className:"input",type:"text",placeholder:" ",value:t,name:"email",onChange:this.handleChange}),Object(L.jsx)("div",{className:"cut cut-short"}),Object(L.jsx)("label",{htmlFor:"email1",className:"placeholder",children:"Email"})]}),Object(L.jsxs)("div",{className:"input-container ic2",children:[Object(L.jsx)("input",{id:"password1",className:"input",type:"text",placeholder:" ",value:n,name:"password",onChange:this.handleChange}),Object(L.jsx)("div",{className:"cut"}),Object(L.jsx)("label",{htmlFor:"password1",className:"placeholder",children:"Password"})]}),Object(L.jsx)("button",{type:"text",className:"submit",children:"submit"})]})})}}]),n}(c.Component),G={onLogin:function(e){return function(){var t=Object(v.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(y.loginRequest()),t.prev=1,t.next=4,C.a.post("/users/login",e);case 4:c=t.sent,q(c.data.token),n(y.loginSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(y.loginError(t.t0.message));case 12:case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}},W=Object(_.b)(null,G)(Z),Y=function(){return Object(L.jsx)("div",{className:"Login-container",children:Object(L.jsx)(W,{})})},$=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={name:"",email:"",password:""},e.handleChange=function(t){var n=t.target,c=n.name,a=n.value;e.setState(Object(J.a)({},c,a))},e.handleSubmit=function(t){t.preventDefault(),e.props.onRegister(e.state),console.log("login :",e.state.login),console.log("email :",e.state.email),console.log("password :",e.state.password),e.reset()},e.reset=function(){e.setState({name:"",email:"",password:""})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,c=e.password;return Object(L.jsx)(L.Fragment,{children:Object(L.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,children:[Object(L.jsx)("div",{className:"title",children:"Welcome"}),Object(L.jsx)("div",{className:"subtitle",children:"Let's create your account!"}),Object(L.jsxs)("div",{className:"input-container ic1",children:[Object(L.jsx)("input",{id:"name",className:"input",type:"text",placeholder:" ",value:t,name:"name",onChange:this.handleChange}),Object(L.jsx)("div",{className:"cut"}),Object(L.jsx)("label",{htmlFor:"name",className:"placeholder",children:"Name"})]}),Object(L.jsxs)("div",{className:"input-container ic2",children:[Object(L.jsx)("input",{id:"email",className:"input",type:"text",placeholder:" ",value:n,name:"email",onChange:this.handleChange}),Object(L.jsx)("div",{className:"cut cut-short"}),Object(L.jsx)("label",{htmlFor:"email",className:"placeholder",children:"Email"})]}),Object(L.jsxs)("div",{className:"input-container ic2",children:[Object(L.jsx)("input",{id:"password",className:"input",type:"text",placeholder:" ",value:c,name:"password",onChange:this.handleChange}),Object(L.jsx)("div",{className:"cut"}),Object(L.jsx)("label",{htmlFor:"password",className:"placeholder",children:"Password"})]}),Object(L.jsx)("button",{type:"text",className:"submit",children:"submit"})]})})}}]),n}(c.Component),K={onRegister:function(e){return function(){var t=Object(v.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(y.registerRequest()),t.prev=1,t.next=4,C.a.post("/users/signup",e);case 4:c=t.sent,q(c.data.token),n(y.registerSuccess(c.data)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(y.registerError(t.t0.message));case 12:case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}},Q=Object(_.b)(null,K)($),V=function(){return Object(L.jsx)("div",{className:"Signup-container",children:Object(L.jsx)(Q,{})})},X=n(43),ee=n.n(X),te=Object(N.b)("fetchContactsRequest"),ne=Object(N.b)("fetchContactsSucces"),ce=Object(N.b)("fetchContactsError"),ae=Object(N.b)("addContactsRequest"),re=Object(N.b)("addContactsSucces"),se=Object(N.b)("addContactsError"),oe=Object(N.b)("deleteContactsRequest"),ie=Object(N.b)("deleteContactsSucces"),ue=Object(N.b)("deleteContactsError"),le=Object(N.b)("fitlerContact"),be=ee.a.generate(),je=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(i.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={name:"",number:""},e.onInputChange=function(t){e.setState(Object(J.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var n=e.state,c=n.name,a=n.number;e.props.addContact(c,a,be),e.setState({name:"",number:""})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.number;return Object(L.jsx)("div",{children:Object(L.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,children:[Object(L.jsx)("div",{className:"subtitle",children:"You can add new contact!"}),Object(L.jsxs)("div",{className:"input-container ic2",children:[Object(L.jsx)("input",{id:be,className:"input",type:"text",placeholder:" ",value:t,name:"name",onChange:this.onInputChange,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"\u0418\u043c\u044f \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u0438\u0437 \u0431\u0443\u043a\u0432, \u0430\u043f\u043e\u0441\u0442\u0440\u043e\u0444\u0430, \u0442\u0438\u0440\u0435 \u0438 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan \u0438 \u0442. \u043f.",required:!0}),Object(L.jsx)("div",{className:"cut cut-short"}),Object(L.jsx)("label",{htmlFor:be,className:"placeholder",children:"Name"})]}),Object(L.jsxs)("div",{className:"input-container ic2",children:[Object(L.jsx)("input",{id:be,className:"input",type:"tel",placeholder:" ",value:n,name:"number",onChange:this.onInputChange,pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0441\u0442\u043e\u044f\u0442\u044c \u0438\u0437 \u0446\u0438\u0444\u0440 \u0438 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b, \u0442\u0438\u0440\u0435, \u043a\u0440\u0443\u0433\u043b\u044b\u0435 \u0441\u043a\u043e\u0431\u043a\u0438 \u0438 \u043c\u043e\u0436\u0435\u0442 \u043d\u0430\u0447\u0438\u043d\u0430\u0442\u044c\u0441\u044f \u0441 +",required:!0}),Object(L.jsx)("div",{className:"cut"}),Object(L.jsx)("label",{htmlFor:be,className:"placeholder",children:"Number"})]}),Object(L.jsx)("button",{type:"submit",className:"submit",children:"Add Contact"})]})})}}]),n}(c.Component),de=Object(_.b)(null,(function(e){return{addContact:function(t,n){return e(function(e,t){return function(n){var c={name:e,number:t};n(ae()),C.a.post("/contacts",c).then((function(e){var t=e.data;return n(re(t))})).catch((function(e){return n(se(e.message))}))}}(t,n))}}}))(je),he=(n(85),n(27)),me=function(e){return e.contacts.filter},Oe=Object(he.a)([me,function(e){return e.contacts.items}],(function(e,t){var n=e.toLowerCase();return t.filter((function(e){return e.name.toLowerCase().includes(n)}))})),pe=Object(_.b)((function(e){return{contacts:Oe(e)}}),(function(e){return{onDeleteContact:function(t){return e((n=t,function(e){e(oe()),C.a.delete("/contacts/".concat(n)).then((function(t){return e(ie(n))})).catch((function(t){return e(ue(t.message))}))}));var n}}}))((function(e){var t=e.contacts,n=e.onDeleteContact;return Object(L.jsx)("div",{className:"Contact-container",children:Object(L.jsx)("ul",{className:"Contact-container__list",children:t.map((function(e){return Object(L.jsxs)("li",{className:"Contact-container__item",children:[e.name,": ",e.number,Object(L.jsx)("button",{onClick:function(){return n(e.id)},className:"Contact-list__btn",children:"Delete"})]},e.id)}))})})})),fe=Object(_.b)((function(e){return{value:me(e)}}),(function(e){return{onChange:function(t){return e(le(t.target.value))}}}))((function(e){var t=e.value,n=e.onChange;return Object(L.jsxs)("div",{className:"Filter-container",children:[Object(L.jsx)("h3",{children:"Find contact by name"}),Object(L.jsx)("label",{children:Object(L.jsx)("input",{className:"Filter-input",name:"search",type:"text",value:t,onChange:n})})]})})),ge=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchContacts()}},{key:"render",value:function(){return Object(L.jsxs)("div",{className:"Contact-container",children:[Object(L.jsx)("div",{className:"Contact-form__wrapper",children:Object(L.jsx)(de,{})}),Object(L.jsxs)("div",{className:"Contact-list__wrapper",children:[Object(L.jsx)("h2",{children:"Contacts"}),Object(L.jsx)(fe,{}),Object(L.jsx)(pe,{})]})]})}}]),n}(c.Component),ve=Object(_.b)(null,(function(e){return{fetchContacts:function(){return e(function(){var e=Object(v.a)(g.a.mark((function e(t){var n,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(te()),e.prev=1,e.next=4,C.a.get("/contacts");case 4:n=e.sent,c=n.data,t(ne(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(ce(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}}}))(ge),xe=n(21),Ce=n(30),Ne=["component","isAuthenticated","redirectTo"],ye=Object(_.b)((function(e){return{isAuthenticated:T(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,c=e.redirectTo,a=Object(Ce.a)(e,Ne);return Object(L.jsx)(j.b,Object(xe.a)(Object(xe.a)({},a),{},{render:function(e){return n?Object(L.jsx)(t,Object(xe.a)({},e)):Object(L.jsx)(j.a,{to:c})}}))})),we=["component","isAuthenticated","redirectTo"],ke=Object(_.b)((function(e){return{isAuthenticated:T(e)}}))((function(e){var t=e.component,n=e.isAuthenticated,c=e.redirectTo,a=Object(Ce.a)(e,we);return Object(L.jsx)(j.b,Object(xe.a)(Object(xe.a)({},a),{},{render:function(e){return n&&a.restricted?Object(L.jsx)(j.a,{to:c}):Object(L.jsx)(t,Object(xe.a)({},e))}}))})),Se=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurrentUser()}},{key:"render",value:function(){return Object(L.jsxs)("div",{className:"App",children:[Object(L.jsx)(M,{}),Object(L.jsxs)(j.d,{children:[Object(L.jsx)(ke,{path:d,exact:!0,component:P}),Object(L.jsx)(ke,{path:h,component:B}),Object(L.jsx)(ke,{path:O,component:Y,restricted:!0,redirectTo:m}),Object(L.jsx)(ke,{path:p,component:V,restricted:!0,redirectTo:m}),Object(L.jsx)(ye,{path:m,component:ve,restricted:!0,redirectTo:O})]})]})}}]),n}(c.Component),Ae={onGetCurrentUser:function(){return function(){var e=Object(v.a)(g.a.mark((function e(t,n){var c,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),a=c.auth.token){e.next=3;break}return e.abrupt("return");case 3:return q(a),t(y.getCurrentUserRequest()),e.prev=6,e.next=9,C.a.get("/users/current");case 9:r=e.sent,t(y.getCurrentUserSuccess(r.data)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),t(y.getCurrentUserError(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t,n){return e.apply(this,arguments)}}()}},Ee=Object(_.b)(null,Ae)(Se),Re=n(29),qe=n(44),Ue=n.n(qe),_e=n(7),Le={name:null,email:null},Fe=Object(N.c)(Le,(w={},Object(J.a)(w,y.registerSuccess,(function(e,t){return t.payload.user})),Object(J.a)(w,y.loginSuccess,(function(e,t){return t.payload.user})),Object(J.a)(w,y.logoutSuccess,(function(){return Le})),Object(J.a)(w,y.getCurrentUserSuccess,(function(e,t){return t.payload})),w)),Te=Object(N.c)(null,(k={},Object(J.a)(k,y.registerSuccess,(function(e,t){return t.payload.token})),Object(J.a)(k,y.loginSuccess,(function(e,t){return t.payload.token})),Object(J.a)(k,y.logoutSuccess,(function(){return null})),k)),De=Object(N.c)(null,(S={},Object(J.a)(S,y.registerError,(function(e,t){return t.payload})),Object(J.a)(S,y.loginError,(function(e,t){return t.payload})),Object(J.a)(S,y.logoutError,(function(e,t){return t.payload})),Object(J.a)(S,y.getCurrentUserError,(function(e,t){return t.payload})),S)),ze=Object(N.c)(!1,(A={},Object(J.a)(A,y.registerSuccess,(function(){return!0})),Object(J.a)(A,y.loginSuccess,(function(){return!0})),Object(J.a)(A,y.getCurrentUserSuccess,(function(){return!0})),Object(J.a)(A,y.registerError,(function(){return!1})),Object(J.a)(A,y.loginError,(function(){return!1})),Object(J.a)(A,y.getCurrentUserError,(function(){return!1})),Object(J.a)(A,y.logoutSuccess,(function(){return!1})),A)),He=Object(_e.b)({user:Fe,token:Te,isLogedIn:ze,error:De}),Ie=Object(N.c)([],(E={},Object(J.a)(E,ne,(function(e,t){return t.payload})),Object(J.a)(E,re,(function(e,t){var n=e.map((function(e){return e.name.toLowerCase()}));return console.log(n),n.includes(t.payload.name.toLowerCase())?alert("This contact is already in your list!"):[t.payload].concat(Object(Re.a)(e))})),Object(J.a)(E,ie,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),E)),Me=Object(N.c)("",Object(J.a)({},le,(function(e,t){return t.payload}))),Pe=Object(N.c)(!1,(R={},Object(J.a)(R,te,(function(){return!0})),Object(J.a)(R,ne,(function(){return!1})),Object(J.a)(R,ce,(function(){return!1})),Object(J.a)(R,ae,(function(){return!0})),Object(J.a)(R,re,(function(){return!1})),Object(J.a)(R,se,(function(){return!1})),Object(J.a)(R,oe,(function(){return!0})),Object(J.a)(R,ie,(function(){return!1})),Object(J.a)(R,ue,(function(){return!1})),R)),Be=Object(_e.b)({items:Ie,filter:Me,loading:Pe}),Je=n(20),Ze=Object(Re.a)(Object(N.d)({serializableCheck:{ignoredActions:[Je.a,Je.f,Je.b,Je.c,Je.d,Je.e]}})),Ge={key:"auth",storage:Ue.a,whitelist:["token"]},We=Object(N.a)({reducer:{auth:Object(Je.g)(Ge,He),contacts:Be},middleware:Ze,devTools:!1}),Ye={store:We,persistor:Object(Je.h)(We)},$e=n(45);s.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(_.a,{store:Ye.store,children:Object(L.jsx)($e.a,{loading:null,persistor:Ye.persistor,children:Object(L.jsx)(o.a,{children:Object(L.jsx)(Ee,{})})})})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.79dea48a.chunk.js.map